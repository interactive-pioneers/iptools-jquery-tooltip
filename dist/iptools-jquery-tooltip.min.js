/*! iptools-jquery-tooltip - v1.0.0 - 2016-02-17
* https://github.com/interactive-pioneers/iptools-jquery-tooltip
* Copyright Â© 2016 Interactive Pioneers GmbH; Licensed GPL */
!function(a,b){"use strict";function c(b,c){this.settings=a.extend({},l,c),this.$element=a(b),this.$element.css("white-space","nowrap"),this.resizeTimeout=0,this.active=!1,this.tooltipText=this.$element.attr(this.settings.dataAttrTooltipText),this.tooltipHeadline=this.$element.attr(this.settings.dataAttrTooltipHeadline),this.position={},this.addEventListeners()}function d(){var c=a(b),d=c.height(),e=c.scrollTop();j={width:c.width(),height:d,top:e,bottom:e+d}}function e(){clearTimeout(m),m=setTimeout(function(){d()},o)}function f(){clearTimeout(n),n=setTimeout(function(){d()},o)}function g(){a(b).on("resize",e).on("scroll",f)}function h(a){return a+"."+k}function i(){d(),g()}var j,k="iptTooltip",l={bubbleArrow:!1,bubbleArrowClass:"tooltip__bubble-arrow",closeButton:!1,closeButtonClass:"tooltip__close",dataAttrTooltipText:"data-tooltip-text",dataAttrTooltipHeadline:"data-tooltip-headline",defaultHorizontalPosition:"right",defaultVerticalPosition:"top",fadeDuration:250,headlineClass:"tooltip__headline",margin:5,maxWidth:300,stick:!1,textWrapperClass:"tooltip__text",tooltipClass:"tooltip",tooltipClassActiveModifier:"--active"},m=0,n=0,o=250;c.prototype={setDimensions:function(){switch(this.updateTriggerDimensions(),this.setHorizontalPosition(this.settings.defaultHorizontalPosition),this.setVerticalPosition(this.settings.defaultVerticalPosition),this.settings.defaultHorizontalPosition){case"center":this.position.left<0?this.position.left=this.settings.margin:this.position.left+this.tooltipWidth>j.width&&(this.position.left=j.width-this.tooltipWidth-this.settings.margin);break;case"left":this.position.left<0&&this.setHorizontalPosition("right"),this.position.left+this.tooltipWidth>j.width&&this.setHorizontalPosition("center");break;default:this.position.left+this.tooltipWidth>j.width&&this.setHorizontalPosition("left"),this.position.left<0&&this.setHorizontalPosition("center")}(this.position.left<0||this.position.left+this.tooltipWidth>j.width)&&(this.position.left=.5*(j.width-this.tooltipWidth),this.position.horizontal="center"),"bottom"===this.position.vertical?this.position.top+this.tooltipHeight>j.bottom&&this.setVerticalPosition("top"):this.position.top<j.top&&this.setVerticalPosition("bottom"),this.$tooltip.css({left:this.position.left,top:this.position.top}).removeClass(this.settings.tooltipClass+"--top-right").removeClass(this.settings.tooltipClass+"--top-center").removeClass(this.settings.tooltipClass+"--top-left").removeClass(this.settings.tooltipClass+"--bottom-right").removeClass(this.settings.tooltipClass+"--bottom-center").removeClass(this.settings.tooltipClass+"--bottom-left").addClass(this.settings.tooltipClass+"--"+this.position.vertical+"-"+this.position.horizontal),this.updateArrowPosition()},setHorizontalPosition:function(a){switch(a){case"left":this.position.left=this.trigger.offsetLeft-this.tooltipWidth-this.settings.margin,this.position.horizontal="left";break;case"center":this.position.left=this.trigger.offsetLeft+.5*(this.trigger.width-this.tooltipWidth),this.position.horizontal="center";break;default:this.position.left=this.trigger.offsetLeft+this.trigger.width+this.settings.margin,this.position.horizontal="right"}},setVerticalPosition:function(a){switch(a){case"bottom":this.position.top=this.trigger.offsetTop+this.trigger.height+this.settings.margin,this.position.vertical="bottom";break;default:this.position.top=this.trigger.offsetTop-this.tooltipHeight-this.settings.margin,this.position.vertical="top"}},updateTriggerDimensions:function(){this.trigger={width:this.$element.outerWidth(),height:this.$element.outerHeight(),offsetTop:this.$element.offset().top,offsetLeft:this.$element.offset().left}},updateTooltipDimensions:function(){this.$tooltip&&(this.$tooltip.css("max-width",this.settings.maxWidth),this.tooltipWidth=this.$tooltip.outerWidth(),this.tooltipWidth>j.width&&(this.tooltipWidth=j.width-2*this.settings.margin,this.$tooltip.css("max-width",this.tooltipWidth)),this.tooltipHeight=this.$tooltip.outerHeight())},updateArrowPosition:function(){if(this.settings.bubbleArrow){var a=this.trigger.offsetLeft-this.position.left+this.trigger.width/2;this.$tooltip.find("."+this.settings.bubbleArrowClass).css("left",a+"px")}},create:function(){if(!this.$tooltip){var b=a("<div/>").addClass(this.settings.tooltipClass);this.tooltipHeadline&&a("<h4/>").addClass(this.settings.headlineClass).text(this.tooltipHeadline).appendTo(b),a("<div/>").addClass(this.settings.textWrapperClass).html(this.tooltipText).appendTo(b),this.settings.bubbleArrow&&a("<div/>").addClass(this.settings.bubbleArrowClass).appendTo(b),this.settings.closeButton&&a("<button/>").addClass(this.settings.closeButtonClass).appendTo(b).on(h("click"),null,this,this.hide),this.$tooltip=b.appendTo("body"),this.updateTooltipDimensions()}},remove:function(){this.$tooltip&&this.$tooltip.remove()},show:function(a){var b=a.data;b.$tooltip&&(b.$element.trigger(h("beforeShow")),b.$tooltip.addClass(b.settings.tooltipClass+b.settings.tooltipClassActiveModifier).stop().fadeIn(b.settings.fadeDuration),b.active=!0)},hide:function(a){var b=a.data;b.active&&(b.$tooltip.removeClass(b.settings.tooltipClass+b.settings.tooltipClassActiveModifier).stop().fadeOut(b.settings.fadeDuration),b.active=!1,b.$element.trigger(h("afterHide")))},handleMouseEnter:function(a){var b=a.data;b.create(),b.setDimensions(),b.show(a)},handleResize:function(a){var b=a.data;b.hide(a),clearTimeout(b.resizeTimeout),b.resizeTimeout=setTimeout(function(){b.updateTooltipDimensions()},o)},addEventListeners:function(){this.$element.on(h("mouseenter"),null,this,this.handleMouseEnter).on(h("touchstart"),null,this,this.handleMouseEnter),this.settings.stick||this.$element.on(h("mouseleave"),null,this,this.hide),a(b).on(h("resize"),null,this,this.handleResize)},destroy:function(){this.remove(),this.$element.off("."+k).removeData("plugin_"+k)}},i(),a.fn[k]=function(b){return this.each(function(){a.data(this,"plugin_"+k)||a.data(this,"plugin_"+k,new c(this,b))})}}(jQuery,window);