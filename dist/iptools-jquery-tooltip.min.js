/*! iptools-jquery-tooltip - v1.0.4 - 2016-02-26
* https://github.com/interactive-pioneers/iptools-jquery-tooltip
* Copyright Â© 2016 Interactive Pioneers GmbH; Licensed GPL-3.0 */
!function(a,b){"use strict";function c(b,c){this.settings=a.extend({},p,c),this.$element=a(b),this.$element.css("white-space","nowrap"),this.resizeTimeout=0,this.$tooltip=a(),this.active=!1,this.tooltipText=this.$element.attr(this.settings.dataAttrTooltipText),this.tooltipHeadline=this.$element.attr(this.settings.dataAttrTooltipHeadline),this.position={},this.addEventListeners()}function d(){var c=a(b),d=c.height(),e=c.scrollTop();n={width:c.width(),height:d,top:e,bottom:e+d}}function e(a){var b=a.data;setTimeout(function(){b.$element.is(":hover")&&(b.create(),b.setDimensions(),b.show())},b.settings.delay),a.stopPropagation()}function f(a){var b=a.data;setTimeout(function(){b.$tooltip.length&&(b.$element.is(":hover")||b.$tooltip.is(":hover")||b.hide())},b.settings.delay)}function g(a){a.data.hide()}function h(a){for(var b,c=q.length,d=0;c>d;++d)b=q[d],b.settings.stick&&b.active&&(b.$tooltip.is(a.target)||0!==b.$tooltip.has(a.target).length||b.hide())}function i(){clearTimeout(r),r=setTimeout(function(){d()},t)}function j(){clearTimeout(s),s=setTimeout(function(){d()},t)}function k(){a(b).on(l("resize"),i).on(l("scroll"),j),a("body").on(l("click")+" "+l("touchstart"),h)}function l(a){return a+"."+o}function m(){d(),k()}var n,o="iptTooltip",p={bubbleArrow:!1,bubbleArrowClass:"tooltip__bubble-arrow",closeButton:!1,closeButtonClass:"tooltip__close",dataAttrTooltipText:"data-tooltip-text",dataAttrTooltipHeadline:"data-tooltip-headline",defaultHorizontalPosition:"right",defaultVerticalPosition:"top",delay:150,fadeDuration:250,headlineClass:"tooltip__headline",margin:5,maxWidth:300,openOnClick:!1,singleOpen:!1,stick:!1,textWrapperClass:"tooltip__text",tooltipClass:"tooltip",tooltipClassActiveModifier:"--active"},q=[],r=0,s=0,t=250;c.prototype={setDimensions:function(){switch(this.updateTriggerDimensions(),this.setHorizontalPosition(this.settings.defaultHorizontalPosition),this.setVerticalPosition(this.settings.defaultVerticalPosition),this.settings.defaultHorizontalPosition){case"center":this.position.left<0?this.position.left=this.settings.margin:this.position.left+this.tooltipWidth>n.width&&(this.position.left=n.width-this.tooltipWidth-this.settings.margin);break;case"left":this.position.left<0&&this.setHorizontalPosition("right"),this.position.left+this.tooltipWidth>n.width&&this.setHorizontalPosition("center");break;default:this.position.left+this.tooltipWidth>n.width&&this.setHorizontalPosition("left"),this.position.left<0&&this.setHorizontalPosition("center")}(this.position.left<0||this.position.left+this.tooltipWidth>n.width)&&(this.position.left=.5*(n.width-this.tooltipWidth),this.position.horizontal="center"),"bottom"===this.position.vertical?this.position.top+this.tooltipHeight>n.bottom&&this.setVerticalPosition("top"):this.position.top<n.top&&this.setVerticalPosition("bottom"),this.$tooltip.css({left:this.position.left,top:this.position.top}).removeClass(this.settings.tooltipClass+"--top-right").removeClass(this.settings.tooltipClass+"--top-center").removeClass(this.settings.tooltipClass+"--top-left").removeClass(this.settings.tooltipClass+"--bottom-right").removeClass(this.settings.tooltipClass+"--bottom-center").removeClass(this.settings.tooltipClass+"--bottom-left").addClass(this.settings.tooltipClass+"--"+this.position.vertical+"-"+this.position.horizontal),this.updateArrowPosition()},setHorizontalPosition:function(a){switch(a){case"left":this.position.left=this.trigger.offsetLeft-this.tooltipWidth-this.settings.margin,this.position.horizontal="left";break;case"center":this.position.left=this.trigger.offsetLeft+.5*(this.trigger.width-this.tooltipWidth),this.position.horizontal="center";break;default:this.position.left=this.trigger.offsetLeft+this.trigger.width+this.settings.margin,this.position.horizontal="right"}},setVerticalPosition:function(a){switch(a){case"bottom":this.position.top=this.trigger.offsetTop+this.trigger.height+this.settings.margin,this.position.vertical="bottom";break;default:this.position.top=this.trigger.offsetTop-this.tooltipHeight-this.settings.margin,this.position.vertical="top"}},updateTriggerDimensions:function(){this.trigger={width:this.$element.outerWidth(),height:this.$element.outerHeight(),offsetTop:this.$element.offset().top,offsetLeft:this.$element.offset().left}},updateTooltipDimensions:function(){this.$tooltip.length&&(this.$tooltip.css("max-width",this.settings.maxWidth),this.tooltipWidth=this.$tooltip.outerWidth(),this.tooltipWidth>n.width&&(this.tooltipWidth=n.width-2*this.settings.margin,this.$tooltip.css("max-width",this.tooltipWidth)),this.tooltipHeight=this.$tooltip.outerHeight())},updateArrowPosition:function(){if(this.settings.bubbleArrow){var a=this.trigger.offsetLeft-this.position.left+this.trigger.width/2;this.$tooltip.find("."+this.settings.bubbleArrowClass).css("left",a+"px")}},create:function(){if(0===this.$tooltip.length){var b=a("<div/>").addClass(this.settings.tooltipClass);this.tooltipHeadline&&a("<h4/>").addClass(this.settings.headlineClass).text(this.tooltipHeadline).appendTo(b),a("<div/>").addClass(this.settings.textWrapperClass).html(this.tooltipText).appendTo(b),this.settings.bubbleArrow&&a("<div/>").addClass(this.settings.bubbleArrowClass).appendTo(b),this.settings.closeButton&&a("<button/>").addClass(this.settings.closeButtonClass).appendTo(b).on(l("click"),null,this,g),this.$tooltip=b.appendTo("body"),this.updateTooltipDimensions(),this.settings.stick||this.$tooltip.on(l("mouseleave"),null,this,f)}},remove:function(){this.$tooltip.length&&this.$tooltip.remove()},show:function(){if(this.$tooltip.length&&!this.active){var a=this;this.$element.trigger(l("beforeShow")),this.$tooltip.addClass(this.settings.tooltipClass+this.settings.tooltipClassActiveModifier).stop().fadeIn(this.settings.fadeDuration,function(){a.$element.trigger(l("afterShow"))}),this.active=!0,this.settings.singleOpen&&this.hideAllOtherTooltips()}},hide:function(){if(this.active){var a=this;this.$element.trigger(l("beforeHide")),this.$tooltip.removeClass(this.settings.tooltipClass+this.settings.tooltipClassActiveModifier).stop().fadeOut(this.settings.fadeDuration,function(){a.$element.trigger(l("afterHide"))}),this.active=!1}},hideAllOtherTooltips:function(){for(var a,b=q.length,c=0;b>c;++c)a=q[c],this.$element!==a.$element&&a.hide()},handleResize:function(a){var b=a.data;b.hide(),clearTimeout(b.resizeTimeout),b.resizeTimeout=setTimeout(function(){b.updateTooltipDimensions()},t)},addEventListeners:function(){this.settings.openOnClick?this.$element.on(l("click"),null,this,e):this.$element.on(l("mouseenter"),null,this,e),this.$element.on(l("touchstart"),null,this,e),this.settings.stick||this.$element.on(l("mouseleave"),null,this,f),a(b).on(l("resize"),null,this,this.handleResize)},destroy:function(){this.remove(),this.$element.off(l("click")).off(l("mouseenter")).off(l("mouseleave")).off(l("touchstart")).removeData("plugin_"+o)}},m(),a.fn[o]=function(b){return this.each(function(){if(!a.data(this,"plugin_"+o)){var d=new c(this,b);a.data(this,"plugin_"+o,d),q.push(d)}})}}(jQuery,window);