/*! iptools-jquery-tooltip - v1.0.2 - 2016-02-22
* https://github.com/interactive-pioneers/iptools-jquery-tooltip
* Copyright Â© 2016 Interactive Pioneers GmbH; Licensed GPL */
!function(a,b){"use strict";function c(b,c){this.settings=a.extend({},o,c),this.$element=a(b),this.$element.css("white-space","nowrap"),this.resizeTimeout=0,this.active=!1,this.tooltipText=this.$element.attr(this.settings.dataAttrTooltipText),this.tooltipHeadline=this.$element.attr(this.settings.dataAttrTooltipHeadline),this.position={},this.addEventListeners()}function d(){var c=a(b),d=c.height(),e=c.scrollTop();m={width:c.width(),height:d,top:e,bottom:e+d}}function e(a){var b=a.data;b.create(),b.setDimensions(),b.show()}function f(a){a.data.hide()}function g(a){for(var b,c=p.length,d=0;c>d;++d)b=p[d],b.settings.stick&&b.active&&(b.$tooltip.is(a.target)||0!==b.$tooltip.has(a.target).length||b.hide())}function h(){clearTimeout(q),q=setTimeout(function(){d()},s)}function i(){clearTimeout(r),r=setTimeout(function(){d()},s)}function j(){a(b).on(k("resize"),h).on(k("scroll"),i),a("body").on(k("click")+" "+k("touchstart"),g)}function k(a){return a+"."+n}function l(){d(),j()}var m,n="iptTooltip",o={bubbleArrow:!1,bubbleArrowClass:"tooltip__bubble-arrow",closeButton:!1,closeButtonClass:"tooltip__close",dataAttrTooltipText:"data-tooltip-text",dataAttrTooltipHeadline:"data-tooltip-headline",defaultHorizontalPosition:"right",defaultVerticalPosition:"top",fadeDuration:250,headlineClass:"tooltip__headline",margin:5,maxWidth:300,singleOpen:!1,stick:!1,textWrapperClass:"tooltip__text",tooltipClass:"tooltip",tooltipClassActiveModifier:"--active"},p=[],q=0,r=0,s=250;c.prototype={setDimensions:function(){switch(this.updateTriggerDimensions(),this.setHorizontalPosition(this.settings.defaultHorizontalPosition),this.setVerticalPosition(this.settings.defaultVerticalPosition),this.settings.defaultHorizontalPosition){case"center":this.position.left<0?this.position.left=this.settings.margin:this.position.left+this.tooltipWidth>m.width&&(this.position.left=m.width-this.tooltipWidth-this.settings.margin);break;case"left":this.position.left<0&&this.setHorizontalPosition("right"),this.position.left+this.tooltipWidth>m.width&&this.setHorizontalPosition("center");break;default:this.position.left+this.tooltipWidth>m.width&&this.setHorizontalPosition("left"),this.position.left<0&&this.setHorizontalPosition("center")}(this.position.left<0||this.position.left+this.tooltipWidth>m.width)&&(this.position.left=.5*(m.width-this.tooltipWidth),this.position.horizontal="center"),"bottom"===this.position.vertical?this.position.top+this.tooltipHeight>m.bottom&&this.setVerticalPosition("top"):this.position.top<m.top&&this.setVerticalPosition("bottom"),this.$tooltip.css({left:this.position.left,top:this.position.top}).removeClass(this.settings.tooltipClass+"--top-right").removeClass(this.settings.tooltipClass+"--top-center").removeClass(this.settings.tooltipClass+"--top-left").removeClass(this.settings.tooltipClass+"--bottom-right").removeClass(this.settings.tooltipClass+"--bottom-center").removeClass(this.settings.tooltipClass+"--bottom-left").addClass(this.settings.tooltipClass+"--"+this.position.vertical+"-"+this.position.horizontal),this.updateArrowPosition()},setHorizontalPosition:function(a){switch(a){case"left":this.position.left=this.trigger.offsetLeft-this.tooltipWidth-this.settings.margin,this.position.horizontal="left";break;case"center":this.position.left=this.trigger.offsetLeft+.5*(this.trigger.width-this.tooltipWidth),this.position.horizontal="center";break;default:this.position.left=this.trigger.offsetLeft+this.trigger.width+this.settings.margin,this.position.horizontal="right"}},setVerticalPosition:function(a){switch(a){case"bottom":this.position.top=this.trigger.offsetTop+this.trigger.height+this.settings.margin,this.position.vertical="bottom";break;default:this.position.top=this.trigger.offsetTop-this.tooltipHeight-this.settings.margin,this.position.vertical="top"}},updateTriggerDimensions:function(){this.trigger={width:this.$element.outerWidth(),height:this.$element.outerHeight(),offsetTop:this.$element.offset().top,offsetLeft:this.$element.offset().left}},updateTooltipDimensions:function(){this.$tooltip&&(this.$tooltip.css("max-width",this.settings.maxWidth),this.tooltipWidth=this.$tooltip.outerWidth(),this.tooltipWidth>m.width&&(this.tooltipWidth=m.width-2*this.settings.margin,this.$tooltip.css("max-width",this.tooltipWidth)),this.tooltipHeight=this.$tooltip.outerHeight())},updateArrowPosition:function(){if(this.settings.bubbleArrow){var a=this.trigger.offsetLeft-this.position.left+this.trigger.width/2;this.$tooltip.find("."+this.settings.bubbleArrowClass).css("left",a+"px")}},create:function(){if(!this.$tooltip){var b=a("<div/>").addClass(this.settings.tooltipClass);this.tooltipHeadline&&a("<h4/>").addClass(this.settings.headlineClass).text(this.tooltipHeadline).appendTo(b),a("<div/>").addClass(this.settings.textWrapperClass).html(this.tooltipText).appendTo(b),this.settings.bubbleArrow&&a("<div/>").addClass(this.settings.bubbleArrowClass).appendTo(b),this.settings.closeButton&&a("<button/>").addClass(this.settings.closeButtonClass).appendTo(b).on(k("click"),null,this,f),this.$tooltip=b.appendTo("body"),this.updateTooltipDimensions()}},remove:function(){this.$tooltip&&this.$tooltip.remove()},show:function(){this.$tooltip&&!this.active&&(this.$element.trigger(k("beforeShow")),this.settings.singleOpen&&this.hideAllOtherTooltips(),this.$tooltip.addClass(this.settings.tooltipClass+this.settings.tooltipClassActiveModifier).stop().fadeIn(this.settings.fadeDuration),this.active=!0)},hide:function(){this.active&&(this.$tooltip.removeClass(this.settings.tooltipClass+this.settings.tooltipClassActiveModifier).stop().fadeOut(this.settings.fadeDuration),this.active=!1,this.$element.trigger(k("afterHide")))},hideAllOtherTooltips:function(){for(var a,b=p.length,c=0;b>c;++c)a=p[c],this.$element!==a.$element&&a.hide()},handleResize:function(a){var b=a.data;b.hide(),clearTimeout(b.resizeTimeout),b.resizeTimeout=setTimeout(function(){b.updateTooltipDimensions()},s)},addEventListeners:function(){this.$element.on(k("mouseenter"),null,this,e).on(k("touchstart"),null,this,e),this.settings.stick||this.$element.on(k("mouseleave"),null,this,f),a(b).on(k("resize"),null,this,this.handleResize)},destroy:function(){this.remove(),this.$element.off("."+n).removeData("plugin_"+n)}},l(),a.fn[n]=function(b){return this.each(function(){if(!a.data(this,"plugin_"+n)){var d=new c(this,b);a.data(this,"plugin_"+n,d),p.push(d)}})}}(jQuery,window);